N,g[400][400],f[400][400],b[400],q[400],w,i,j,k,r,s,t,a;min(x,y){return x>y?y:x;}main(){for(;~scanf("%d",&N);printf("%d\n",a)){memset(g,0,sizeof(g));memset(f,0,sizeof(f));t=86+N;for(i=0;i<84;i++)g[0][i+1]=1;for(i=0;i<N;i++)g[1+84+i][t-1]=1;for(a=i=0;i<N;i++){scanf("%d",&j);for(k=0;k<j;k++)scanf("%d%d",&r,&s),g[(r-1)*12+s][85+i]=1;}for(;;){for(w=i=0;i<t;i++)b[i]=-1;b[0]=-2;q[w++]=0;for(i=0;w-i&&b[t-1]==-1;){j=q[i++];for(k=1;k<t;k++)if(b[k]==-1&&g[j][k]-(f[j][k]-f[k][j])>0)b[k]=j,q[w++]=k;}if(b[t-1]==-1)break;for(i=t-1,j=b[i];j>=0;i=j,j=b[i])f[j][i]++;a++;}}}
